<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> 

<html class="no-js" lang="en"> <!--<![endif]-->
<head>
	
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>D3 in Action</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
		<link rel="icon"  type="image/png" href="../favicon.png" />        
		<link rel="apple-touch-icon" href="apple-touch-icon.png">

        <link href="../dist/css/normalize.css" rel="stylesheet" type="text/css">
        <link href="../dist/css/skeleton.css" rel="stylesheet" type="text/css">
        <link href="../dist/css/prism.css" rel="stylesheet" type="text/css">

        <link rel="stylesheet" href="../dist/css/app.css" rel="stylesheet" type="text/css">
        
        

        
</head>



	<style rel="stylesheet" type="text/css">
		

		div#ex1 {
		    background: white;
		    padding: 20px;
		    width: 100%;
		    height: 400px;
		    overflow: auto;
		}
	</style>

<body>

	<div class="container">
	
	  <div class="row">
	    <div class="twelve columns">
		    
		    <h1><a href="../index.html" media="all" accesskey="0" title="D3 in action">D3 in action</a></h1>
		    <p>Elijah Meeks</p>
		    <p>Manning 2015 | 2017</p>
	    </div>
	  </div>
	</div>



<article>
	<div class="container">
	
	  <div class="row">
	    <div class="twelve columns">
			<h3 id="data">6.2.2 D3.nest</h3>
			<p><small></small></p>
				<div id="ex1">
				</div>


			<p class="caption">Simple two level nest.</p>






		    <pre><code class="language-js">

fips	totalpop	pctHispanic	year
6001	1510271	0.225	2010
6003	1175	0.071	2010
6005	38091	0.125	2010
6007	220000	0.141	2010
6009	45578	0.103	2010
6011	21419	0.551	2010
6013	1049025	0.244	2010
6015	28610	0.178	2010
6017	181058	0.121	2010
6019	930450	0.503	2010
6021	28122	0.375	2010
6023	134623	0.098	2010
.....

		    </code></pre>


	    </div>
	  </div>
	</div>
		
		
	<div class="container">
	
	  <div class="row">
	    <div class="twelve columns">

			<pre><code class="language-markup"> <script type="prism-html-markup">
<div id="viz">
</div>
</script>			    
			</code></pre>
	
			<pre><code class="language-js">
function dataViz(data){
	console.log('Hello from dataViz');

	var nested_pctHispanic = d3.nest()
		.key(function(d) { return d.year; })
		.key(function(d) { return d.fips; })
		.entries(data);

	console.log(nested_pctHispanic);

	/*
		[{
		    "key": "2010",
		    "values": [{
		        "key": "6001",
		        "values": [{
		            "fips": "6001",
		            "totalpop": "1510271",
		            "pctHispanic": "0.225",
		            "year": "2010"
		        }]
		    }, {
		        "key": "6003",
		        "values": [{
		            "fips": "6003",
		            "totalpop": "1175",
		            "pctHispanic": "0.071",
		            "year": "2010"
		        }]
		    },

	*/

	d3.select('#ex1').html(JSON.stringify(nested_pctHispanic, null, 3));	

}


d3.csv("../data/pctHispanic.csv", dataViz);	
			</code></pre>

	    </div>
	  </div>
	</div>
	
	
</article>


<script src="../dist/js/vendors/d3.min.js" type="text/javaScript"></script>


<!-- http://colorbrewer2.org/#type=sequential&scheme=BuGn&n=3 -->
<script src="../dist/js/colorbrewer.js" 	type="text/javascript"></script>
<script src="../dist/js/cloud.js" 	type="text/javascript"></script>

<script>
	

(function(scope, d3) {

	function dataViz(data){
		console.log('Hello from dataViz');

		var nested_pctHispanic = d3.nest()
  			.key(function(d) { return d.year; })
  			.key(function(d) { return d.fips; })
  			.entries(data);

  		console.log(nested_pctHispanic);

  		/*
			[{
			    "key": "2010",
			    "values": [{
			        "key": "6001",
			        "values": [{
			            "fips": "6001",
			            "totalpop": "1510271",
			            "pctHispanic": "0.225",
			            "year": "2010"
			        }]
			    }, {
			        "key": "6003",
			        "values": [{
			            "fips": "6003",
			            "totalpop": "1175",
			            "pctHispanic": "0.071",
			            "year": "2010"
			        }]
			    },

  		*/

  		d3.select('#ex1').html(JSON.stringify(nested_pctHispanic, null, 3));	

	}


	d3.csv("../data/pctHispanic.csv", dataViz);	

})(window, d3);	




</script>
<script src="../dist/js/prism.js" type="text/javaScript"></script>

</body>

</html>
